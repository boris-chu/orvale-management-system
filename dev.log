
> orvale-management-system@0.1.0 dev
> next dev -p 80 -p 3000

   ▲ Next.js 15.5.0
   - Local:        http://localhost:3000
   - Network:      http://192.168.1.45:3000

 ✓ Starting...
 ✓ Ready in 994ms
 ✓ Compiled /api/health in 254ms (296 modules)
 GET /api/health 200 in 332ms
 ○ Compiling / ...
 ✓ Compiled / in 1983ms (2345 modules)
 GET / 200 in 2994ms
 ○ Compiling /api/auth/user ...
 ✓ Compiled /api/auth/user in 560ms (2468 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🚀 checkMaintenanceStatus called
📋 Querying system settings...
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 634ms
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 635ms
 GET / 200 in 108ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 9ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 14ms
 ✓ Compiled /tickets in 301ms (2698 modules)
 GET /tickets 200 in 473ms
🚀 checkMaintenanceStatus called
📋 Querying system settings...
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 48ms
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 48ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 14ms
 ✓ Compiled /api/tickets in 327ms (2704 modules)
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
 GET /api/ticket-data/organization 200 in 375ms
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 362ms
 GET /api/ticket-data/categories 200 in 379ms
 GET /api/tickets?status=pending&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 328ms
 GET /api/ticket-data/organization 200 in 14ms
 GET /api/ticket-data/categories 200 in 18ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=pending&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 13ms
 ✓ Compiled /api/developer/teams/[id]/users in 336ms (2712 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
 GET /api/ticket-data/organization 200 in 388ms
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/categories 200 in 392ms
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/developer/teams 200 in 392ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
/Users/borischu/orvale-management-system/node_modules/pino/lib/transport.js:160
      throw new Error(`unable to determine transport target for "${origin}"`)
^


Error: unable to determine transport target for "pino-pretty"
    at fixTarget (webpack-internal:///(rsc)/./node_modules/pino/lib/transport.js:160:13)
    at transport (webpack-internal:///(rsc)/./node_modules/pino/lib/transport.js:130:22)
    at normalizeArgs (webpack-internal:///(rsc)/./node_modules/pino/lib/tools.js:312:16)
    at pino (webpack-internal:///(rsc)/./node_modules/pino/pino.js:91:28)
    at eval (webpack-internal:///(rsc)/./lib/logger.ts:325:57)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

Node.js v22.17.0
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/developer/teams/ITTS_Region7/users 200 in 611ms
 ✓ Compiled /api/developer/users in 221ms (2712 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 POST /api/developer/users 403 in 267ms
 ✓ Compiled in 319ms (1230 modules)
 ✓ Compiled in 162ms (1230 modules)
 ✓ Compiled in 147ms (1230 modules)
 ✓ Compiled in 147ms (1230 modules)
 ✓ Compiled in 142ms (1230 modules)
 ✓ Compiled in 394ms (2515 modules)
 GET /tickets 200 in 156ms
 GET /tickets 200 in 15ms
 GET /tickets 200 in 15ms
 GET /tickets 200 in 15ms
 GET /tickets 200 in 13ms
 GET /tickets 200 in 14ms
 ✓ Compiled /api/developer/users in 96ms (1432 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 POST /api/developer/users 400 in 192ms
 GET /tickets 200 in 130ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 POST /api/developer/users 400 in 19ms
 ✓ Compiled in 606ms (2515 modules)
 ✓ Compiled in 422ms (2515 modules)
 ✓ Compiled in 251ms (2515 modules)
 GET /tickets 200 in 126ms
 GET /tickets 200 in 17ms
 GET /tickets 200 in 15ms
 ✓ Compiled in 390ms (2515 modules)
 GET /tickets 200 in 53ms
 ✓ Compiled in 384ms (2515 modules)
 GET /tickets 200 in 40ms
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 ✓ Compiled in 216ms (2515 modules)
 GET /tickets 200 in 180ms
 ✓ Compiled /favicon.ico in 276ms (1434 modules)
 ✓ Compiled (1440 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 GET /favicon.ico 200 in 446ms
🚀 checkMaintenanceStatus called
📋 Querying system settings...
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 457ms
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 457ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 13ms
 ✓ Compiled /api/ticket-data/categories in 110ms (1442 modules)
 ✓ Compiled (1444 modules)
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
 GET /api/ticket-data/organization 200 in 243ms
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 231ms
 GET /api/ticket-data/categories 200 in 246ms
 GET /api/ticket-data/organization 200 in 14ms
 GET /api/ticket-data/categories 200 in 15ms
 ✓ Compiled in 364ms (2674 modules)
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 GET /tickets 200 in 162ms
 GET /favicon.ico 200 in 20ms
🚀 checkMaintenanceStatus called
📋 Querying system settings...
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 51ms
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 52ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 16ms
 GET /api/ticket-data/organization 200 in 26ms
 GET /api/ticket-data/categories 200 in 29ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 13ms
 GET /api/ticket-data/organization 200 in 19ms
 GET /api/ticket-data/categories 200 in 20ms
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 ✓ Compiled in 501ms (2674 modules)
 GET /tickets 200 in 432ms
 GET /favicon.ico 200 in 21ms
🚀 checkMaintenanceStatus called
📋 Querying system settings...
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 48ms
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 48ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 13ms
 GET /api/ticket-data/organization 200 in 25ms
 GET /api/ticket-data/categories 200 in 29ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 14ms
 GET /api/ticket-data/organization 200 in 16ms
 GET /api/ticket-data/categories 200 in 16ms
 ✓ Compiled in 308ms (2674 modules)
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 GET /tickets 200 in 129ms
 GET /favicon.ico 200 in 20ms
🚀 checkMaintenanceStatus called
📋 Querying system settings...
(node:60671) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 exit listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(Use `node --trace-warnings ...` to show where the warning was created)
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 47ms
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 47ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 17ms
 GET /api/ticket-data/organization 200 in 27ms
 GET /api/ticket-data/categories 200 in 30ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 18ms
 GET /api/ticket-data/organization 200 in 19ms
 GET /api/ticket-data/categories 200 in 19ms
 ✓ Compiled in 326ms (2674 modules)
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 GET /tickets 200 in 126ms
 GET /favicon.ico 200 in 19ms
🚀 checkMaintenanceStatus called
📋 Querying system settings...
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 42ms
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 43ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 13ms
 GET /api/ticket-data/organization 200 in 25ms
 GET /api/ticket-data/categories 200 in 29ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 14ms
 GET /api/ticket-data/organization 200 in 12ms
 GET /api/ticket-data/categories 200 in 14ms
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 ✓ Compiled in 248ms (2674 modules)
 GET /tickets 200 in 259ms
 GET /favicon.ico 200 in 19ms
🚀 checkMaintenanceStatus called
📋 Querying system settings...
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 43ms
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 43ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 14ms
 GET /api/ticket-data/organization 200 in 29ms
 GET /api/ticket-data/categories 200 in 31ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 16ms
 GET /api/ticket-data/organization 200 in 17ms
 GET /api/ticket-data/categories 200 in 23ms
 ✓ Compiled /api/tickets in 97ms (1446 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=pending&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 131ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=pending&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 10ms
 GET /api/ticket-data/categories 200 in 28ms
 ✓ Compiled /api/developer/teams in 162ms (1448 modules)
 ✓ Compiled (1450 modules)
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 GET /api/ticket-data/organization 200 in 308ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/developer/teams 200 in 328ms
 GET /api/developer/teams/ITTS_Region7/users 200 in 323ms
/Users/borischu/orvale-management-system/node_modules/pino/lib/transport.js:160
      throw new Error(`unable to determine transport target for "${origin}"`)
^


Error: unable to determine transport target for "pino-pretty"
    at fixTarget (webpack-internal:///(rsc)/./node_modules/pino/lib/transport.js:160:13)
    at transport (webpack-internal:///(rsc)/./node_modules/pino/lib/transport.js:130:22)
    at normalizeArgs (webpack-internal:///(rsc)/./node_modules/pino/lib/tools.js:312:16)
    at pino (webpack-internal:///(rsc)/./node_modules/pino/pino.js:91:28)
    at eval (webpack-internal:///(rsc)/./lib/logger.ts:325:57)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

Node.js v22.17.0
 ✓ Compiled in 299ms (2680 modules)
 GET /tickets 200 in 54ms
 GET /tickets 200 in 128ms
 GET /favicon.ico 200 in 21ms
🚀 checkMaintenanceStatus called
📋 Querying system settings...
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 49ms
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 50ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 16ms
 GET /api/ticket-data/organization 200 in 24ms
 GET /api/ticket-data/categories 200 in 28ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 16ms
 GET /api/ticket-data/organization 200 in 21ms
 GET /api/ticket-data/categories 200 in 24ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=pending&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 14ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=pending&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 8ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
 GET /api/ticket-data/categories 200 in 43ms
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
 GET /api/ticket-data/organization 200 in 42ms
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/developer/teams 200 in 45ms
 GET /api/developer/teams/ITTS_Region7/users 200 in 38ms
/Users/borischu/orvale-management-system/node_modules/pino/lib/transport.js:160
      throw new Error(`unable to determine transport target for "${origin}"`)
^


Error: unable to determine transport target for "pino-pretty"
    at fixTarget (webpack-internal:///(rsc)/./node_modules/pino/lib/transport.js:160:13)
    at transport (webpack-internal:///(rsc)/./node_modules/pino/lib/transport.js:130:22)
    at normalizeArgs (webpack-internal:///(rsc)/./node_modules/pino/lib/tools.js:312:16)
    at pino (webpack-internal:///(rsc)/./node_modules/pino/pino.js:91:28)
    at eval (webpack-internal:///(rsc)/./lib/logger.ts:325:57)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

Node.js v22.17.0
 GET /api/ticket-data/categories 200 in 8ms
 ✓ Compiled in 435ms (2585 modules)
 GET /tickets 200 in 63ms
 ✓ Compiled in 219ms (2585 modules)
 GET /tickets 200 in 39ms
 ✓ Compiled in 270ms (2585 modules)
 GET /tickets 200 in 38ms
 ✓ Compiled in 399ms (2515 modules)
 GET /tickets 200 in 112ms
 ✓ Compiled in 212ms (2515 modules)
 GET /tickets 200 in 54ms
 ✓ Compiled in 577ms (2525 modules)
 GET /tickets 200 in 56ms
 ✓ Compiled /api/tickets in 218ms (1437 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=pending&queue=all_tickets&priority=&sort=newest_first&limit=50 200 in 309ms
 ✓ Compiled /api/users/assignable in 213ms (2660 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/users/assignable 200 in 286ms
 ✓ Compiled in 550ms (2525 modules)
 GET /tickets 200 in 91ms
 ✓ Compiled in 540ms (2525 modules)
 GET /tickets 200 in 39ms
 ✓ Compiled /api/developer/teams/[id]/users in 162ms (1360 modules)
 ✓ Compiled (1443 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
 GET /api/ticket-data/organization 200 in 444ms
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/ticket-data/categories 200 in 456ms
 GET /api/developer/teams/ITTS_Region7/users 200 in 443ms
 GET /api/developer/teams 200 in 455ms
/Users/borischu/orvale-management-system/node_modules/pino/lib/transport.js:160
      throw new Error(`unable to determine transport target for "${origin}"`)
^


Error: unable to determine transport target for "pino-pretty"
    at fixTarget (webpack-internal:///(rsc)/./node_modules/pino/lib/transport.js:160:13)
    at transport (webpack-internal:///(rsc)/./node_modules/pino/lib/transport.js:130:22)
    at normalizeArgs (webpack-internal:///(rsc)/./node_modules/pino/lib/tools.js:312:16)
    at pino (webpack-internal:///(rsc)/./node_modules/pino/pino.js:91:28)
    at eval (webpack-internal:///(rsc)/./lib/logger.ts:325:57)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

Node.js v22.17.0
 ✓ Compiled in 354ms (2678 modules)
 GET /tickets 200 in 78ms
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
 GET /api/ticket-data/organization 200 in 62ms
 GET /api/ticket-data/categories 200 in 64ms
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/developer/teams 200 in 66ms
 GET /api/developer/teams/ITTS_Region7/users 200 in 64ms
/Users/borischu/orvale-management-system/node_modules/pino/lib/transport.js:160
      throw new Error(`unable to determine transport target for "${origin}"`)
^


Error: unable to determine transport target for "pino-pretty"
    at fixTarget (webpack-internal:///(rsc)/./node_modules/pino/lib/transport.js:160:13)
    at transport (webpack-internal:///(rsc)/./node_modules/pino/lib/transport.js:130:22)
    at normalizeArgs (webpack-internal:///(rsc)/./node_modules/pino/lib/tools.js:312:16)
    at pino (webpack-internal:///(rsc)/./node_modules/pino/pino.js:91:28)
    at eval (webpack-internal:///(rsc)/./lib/logger.ts:325:57)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

Node.js v22.17.0
 ✓ Compiled in 239ms (2678 modules)
 GET /tickets 200 in 47ms
 ✓ Compiled in 249ms (2678 modules)
 GET /tickets 200 in 37ms
 GET /tickets 200 in 189ms
 ✓ Compiled /api/maintenance/status in 141ms (1445 modules)
 ✓ Compiled (1453 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🚀 checkMaintenanceStatus called
📋 Querying system settings...
 GET /favicon.ico 200 in 402ms
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 403ms
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 402ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 13ms
 GET /api/ticket-data/organization 200 in 25ms
 GET /api/ticket-data/categories 200 in 28ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 18ms
 GET /api/ticket-data/organization 200 in 21ms
 GET /api/ticket-data/categories 200 in 25ms
 ✓ Compiled /api/tickets in 149ms (1455 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=pending&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 209ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=pending&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 9ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
 GET /api/ticket-data/categories 200 in 47ms
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
 GET /api/ticket-data/organization 200 in 46ms
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/developer/teams 200 in 48ms
 GET /api/developer/teams/ITTS_Region7/users 200 in 43ms
/Users/borischu/orvale-management-system/node_modules/pino/lib/transport.js:160
      throw new Error(`unable to determine transport target for "${origin}"`)
^


Error: unable to determine transport target for "pino-pretty"
    at fixTarget (webpack-internal:///(rsc)/./node_modules/pino/lib/transport.js:160:13)
    at transport (webpack-internal:///(rsc)/./node_modules/pino/lib/transport.js:130:22)
    at normalizeArgs (webpack-internal:///(rsc)/./node_modules/pino/lib/tools.js:312:16)
    at pino (webpack-internal:///(rsc)/./node_modules/pino/pino.js:91:28)
    at eval (webpack-internal:///(rsc)/./lib/logger.ts:325:57)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

Node.js v22.17.0
 ✓ Compiled in 454ms (2525 modules)
 GET /tickets 200 in 114ms
 ✓ Compiled /api/developer/teams/[id]/users in 80ms (1360 modules)
 ✓ Compiled (1443 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
 GET /api/ticket-data/organization 200 in 257ms
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/developer/teams 200 in 259ms
 GET /api/ticket-data/categories 200 in 260ms
 GET /api/developer/teams/ITTS_Region7/users 200 in 258ms
/Users/borischu/orvale-management-system/node_modules/pino/lib/transport.js:160
      throw new Error(`unable to determine transport target for "${origin}"`)
^


Error: unable to determine transport target for "pino-pretty"
    at fixTarget (webpack-internal:///(rsc)/./node_modules/pino/lib/transport.js:160:13)
    at transport (webpack-internal:///(rsc)/./node_modules/pino/lib/transport.js:130:22)
    at normalizeArgs (webpack-internal:///(rsc)/./node_modules/pino/lib/tools.js:312:16)
    at pino (webpack-internal:///(rsc)/./node_modules/pino/pino.js:91:28)
    at eval (webpack-internal:///(rsc)/./lib/logger.ts:325:57)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

Node.js v22.17.0
 ✓ Compiled in 230ms (2678 modules)
 GET /tickets 200 in 58ms
 ⨯ ./components/StaffTicketModal.tsx
Error:   [31mx[0m Expected '</', got '}'
      ,-[[36;1;4m/Users/borischu/orvale-management-system/components/StaffTicketModal.tsx[0m:1604:1]
 [2m1601[0m |                 </Typography>
 [2m1602[0m |               )}
 [2m1603[0m |             </Paper>
 [2m1604[0m |           ))}
      : [35;1m            ^[0m
 [2m1605[0m |         </Box>
 [2m1606[0m |       </DialogContent>
 [2m1607[0m |       <DialogActions sx={{ p: 3 }}>
      `----

Caused by:
    Syntax Error

Import trace for requested module:
./components/StaffTicketModal.tsx
./app/tickets/page.tsx
 ✓ Compiled in 377ms (2678 modules)
 GET /tickets 200 in 94ms
 ✓ Compiled in 416ms (2525 modules)
 GET /tickets 200 in 117ms
 ✓ Compiled in 419ms (2525 modules)
 GET /tickets 200 in 59ms
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 GET /tickets 200 in 161ms
 ✓ Compiled /api/maintenance/status in 120ms (1307 modules)
 ✓ Compiled (1445 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🚀 checkMaintenanceStatus called
📋 Querying system settings...
 GET /favicon.ico 200 in 430ms
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 430ms
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 430ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 14ms
 ✓ Compiled /api/tickets in 110ms (1447 modules)
 ✓ Compiled (1451 modules)
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
 GET /api/ticket-data/organization 200 in 305ms
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 291ms
 GET /api/ticket-data/categories 200 in 306ms
 GET /api/tickets?status=pending&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 262ms
 GET /api/ticket-data/organization 200 in 11ms
 GET /api/ticket-data/categories 200 in 12ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=pending&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 11ms
 ✓ Compiled in 246ms (2686 modules)
 GET /tickets 200 in 56ms
 ✓ Compiled in 308ms (2686 modules)
 GET /tickets 200 in 51ms
 ✓ Compiled in 314ms (2686 modules)
 GET /tickets 200 in 41ms
 ✓ Compiled in 236ms (2686 modules)
 GET /tickets 200 in 38ms
 ✓ Compiled in 251ms (2686 modules)
 GET /tickets 200 in 53ms
 ✓ Compiled in 213ms (1235 modules)
 GET /tickets 200 in 13ms
 ✓ Compiled in 217ms (2525 modules)
 GET /tickets 200 in 93ms
 ✓ Compiled /api/developer/teams/[id]/users in 187ms (1360 modules)
 ✓ Compiled (1443 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
 GET /api/ticket-data/organization 200 in 501ms
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/ticket-data/categories 200 in 512ms
 GET /api/developer/teams/ITTS_Region7/users 200 in 503ms
 GET /api/developer/teams 200 in 511ms
/Users/borischu/orvale-management-system/node_modules/pino/lib/transport.js:160
      throw new Error(`unable to determine transport target for "${origin}"`)
^


Error: unable to determine transport target for "pino-pretty"
    at fixTarget (webpack-internal:///(rsc)/./node_modules/pino/lib/transport.js:160:13)
    at transport (webpack-internal:///(rsc)/./node_modules/pino/lib/transport.js:130:22)
    at normalizeArgs (webpack-internal:///(rsc)/./node_modules/pino/lib/tools.js:312:16)
    at pino (webpack-internal:///(rsc)/./node_modules/pino/pino.js:91:28)
    at eval (webpack-internal:///(rsc)/./lib/logger.ts:325:57)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

Node.js v22.17.0
 ⨯ ./components/StaffTicketModal.tsx
Error:   [31mx[0m Expected '</', got 'filteredCategories'
      ,-[[36;1;4m/Users/borischu/orvale-management-system/components/StaffTicketModal.tsx[0m:1733:1]
 [2m1730[0m |                 {categorySearchTerm ? 'All Search Results' : 'All Categories'}
 [2m1731[0m |               </Typography>
 [2m1732[0m |             </>
 [2m1733[0m |             filteredCategories.map((category) => (
      : [35;1m            ^^^^^^^^^^^^^^^^^^[0m
 [2m1734[0m |             <Paper key={category.categoryId} sx={{ mb: 2, p: 2, ...(categorySearchTerm && { border: '1px solid', borderColor: 'primary.light' }) }}>
 [2m1735[0m |               <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 2 }}>
 [2m1736[0m |                 <Typography variant="h6" sx={{ color: 'primary.main' }}>
      `----

Caused by:
    Syntax Error

Import trace for requested module:
./components/StaffTicketModal.tsx
./app/tickets/page.tsx
 ⨯ ./components/StaffTicketModal.tsx
Error:   [31mx[0m Expected '</', got ')'
      ,-[[36;1;4m/Users/borischu/orvale-management-system/components/StaffTicketModal.tsx[0m:1847:1]
 [2m1844[0m |               )}
 [2m1845[0m |             </Paper>
 [2m1846[0m |             ))
 [2m1847[0m |           )}
      : [35;1m          ^[0m
 [2m1848[0m |         </Box>
 [2m1849[0m |       </DialogContent>
 [2m1850[0m |       <DialogActions sx={{ p: 3 }}>
      `----

Caused by:
    Syntax Error

Import trace for requested module:
./components/StaffTicketModal.tsx
./app/tickets/page.tsx
 ⨯ ./components/StaffTicketModal.tsx
Error:   [31mx[0m Expected '</', got ')'
      ,-[[36;1;4m/Users/borischu/orvale-management-system/components/StaffTicketModal.tsx[0m:1847:1]
 [2m1844[0m |               )}
 [2m1845[0m |             </Paper>
 [2m1846[0m |             ))
 [2m1847[0m |           )}
      : [35;1m          ^[0m
 [2m1848[0m |         </Box>
 [2m1849[0m |       </DialogContent>
 [2m1850[0m |       <DialogActions sx={{ p: 3 }}>
      `----

Caused by:
    Syntax Error

Import trace for requested module:
./components/StaffTicketModal.tsx
./app/tickets/page.tsx
 ✓ Compiled in 465ms (2525 modules)
 GET /tickets 200 in 110ms
 ✓ Compiled in 212ms (1235 modules)
 GET /tickets 200 in 16ms
 ✓ Compiled in 232ms (2525 modules)
 GET /tickets 200 in 57ms
 ✓ Compiled in 414ms (2525 modules)
 GET /tickets 200 in 56ms
 ✓ Compiled in 350ms (2525 modules)
 GET /tickets 200 in 38ms
 ✓ Compiled in 281ms (2525 modules)
 GET /tickets 200 in 42ms
 ✓ Compiled in 200ms (2525 modules)
 GET /tickets 200 in 40ms
 ✓ Compiled / in 429ms (1332 modules)
 GET / 200 in 604ms
 ✓ Compiled /api/maintenance/status in 233ms (1481 modules)
🚀 checkMaintenanceStatus called
📋 Querying system settings...
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 327ms
 ✓ Compiled /api/auth/login in 330ms (2706 modules)
🔧 Initializing Orvale Management System database...
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
✅ Ticket sequences table initialized
✅ Ticket numbering system initialized
🔄 Updating existing tickets with new numbering system...
✅ Database already initialized with 6 users
📊 Found 14 existing tickets to update
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
❌ Error getting accessible queues: [Error: SQLITE_ERROR: no such column: t.email] {
  errno: 1,
  code: 'SQLITE_ERROR'
}
 POST /api/auth/login 200 in 477ms
✅ Updated ticket 1: IM-250818-426
✅ Updated ticket 2: IM-250818-427
✅ Updated ticket 3: IM-250818-428
✅ Updated ticket 4: IM-250818-429
✅ Updated ticket 5: IM-250818-430
✅ Updated ticket 6: IM-250819-086
✅ Updated ticket 7: R7-250819-325
✅ Updated ticket 8: HE-250819-066
✅ Updated ticket 9: R7-250819-326
✅ Updated ticket 10: R7-250819-327
✅ Updated ticket 11: R7-250819-328
✅ Updated ticket 12: da-250820-062
✅ Updated ticket 13: cw-250820-031
✅ Updated ticket 14: da-250820-063
🎉 All existing tickets updated successfully!
 ✓ Compiled /developer in 438ms (2731 modules)
 GET /developer 200 in 595ms
🚀 checkMaintenanceStatus called
📋 Querying system settings...
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 38ms
 ✓ Compiled /api/developer/stats in 133ms (1501 modules)
 ✓ Compiled in 141ms (1232 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 354ms
 GET /api/developer/stats 200 in 310ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 11ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/stats 200 in 31ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 21ms
 ✓ Compiled in 629ms (2749 modules)
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 GET /developer 200 in 148ms
 ✓ Compiled /favicon.ico in 162ms (1505 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 GET /favicon.ico 200 in 336ms
🚀 checkMaintenanceStatus called
📋 Querying system settings...
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 342ms
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 344ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 12ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/stats 200 in 21ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 12ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/stats 200 in 9ms
 ✓ Compiled in 245ms (2749 modules)
 GET /developer 200 in 36ms
 ✓ Compiled in 232ms (2749 modules)
 GET /developer 200 in 33ms
 ✓ Compiled in 237ms (2749 modules)
 GET /developer 200 in 34ms
 ○ Compiling /admin/tables-management ...
 ✓ Compiled /admin/tables-management in 2.9s (3870 modules)
⚠️ DEPRECATED: shadcn:ui Dialog is deprecated. Use Material-UI Dialog instead.
⚠️ DEPRECATED: shadcn:ui Select is deprecated. Use Material-UI Select instead.
 GET /admin/tables-management 200 in 3292ms
 ○ Compiling /api/auth/user ...
 ✓ Compiled /api/auth/user in 1110ms (2135 modules)
 ✓ Compiled (2139 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🚀 checkMaintenanceStatus called
📋 Querying system settings...
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 1386ms
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 1388ms
 ○ Compiling /api/admin/table-data ...
 ✓ Compiled /api/admin/table-data in 797ms (4013 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/admin/tables-configs 200 in 855ms
 GET /api/admin/table-data?table=user_tickets&limit=25 200 in 856ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/admin/tables-configs 200 in 15ms
 ✓ Compiled /api/admin/tables-columns in 407ms (4015 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
 GET /api/admin/table-data?table=user_tickets&limit=25 200 in 447ms
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/admin/tables-columns 200 in 449ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/admin/tables-columns 200 in 8ms
 ✓ Compiled /api/admin/tables-views in 289ms (4017 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/admin/tables-views 200 in 323ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/admin/tables-views 200 in 8ms
 GET /developer 200 in 78ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 25ms
 ✓ Compiled /api/developer/stats in 333ms (2149 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 516ms
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/stats 200 in 548ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/stats 200 in 7ms
 ○ Compiling /developer/teams ...
 ✓ Compiled /developer/teams in 1511ms (4036 modules)
⚠️ DEPRECATED: shadcn:ui Dialog is deprecated. Use Material-UI Dialog instead.
 GET /developer/teams 200 in 1746ms
 GET /developer/teams 200 in 21ms
🚀 checkMaintenanceStatus called
📋 Querying system settings...
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 40ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 52ms
 ✓ Compiled /api/developer/users in 299ms (2161 modules)
 ✓ Compiled in 369ms (1877 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 867ms
 GET /api/developer/users 200 in 869ms
 GET /api/developer/sections 200 in 870ms
 GET /api/developer/teams 200 in 871ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 19ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
 GET /api/developer/teams 200 in 25ms
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/users 200 in 26ms
 GET /api/developer/sections 200 in 27ms
 GET /developer 200 in 133ms
🚀 checkMaintenanceStatus called
📋 Querying system settings...
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 20ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 23ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 11ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/stats 200 in 27ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 17ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/stats 200 in 11ms
 ✓ Compiled /developer/organization in 466ms (4057 modules)
⚠️ DEPRECATED: shadcn:ui Dialog is deprecated. Use Material-UI Dialog instead.
 GET /developer/organization 200 in 574ms
🚀 checkMaintenanceStatus called
📋 Querying system settings...
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 43ms
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 43ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 17ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/sections 200 in 24ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 12ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/sections 200 in 13ms
 ✓ Compiled in 1516ms (4019 modules)
 GET /developer/organization 200 in 109ms
 ✓ Compiled in 342ms (3864 modules)
 GET /developer/organization 200 in 127ms
 GET /developer 200 in 165ms
 ✓ Compiled /api/auth/user in 178ms (2116 modules)
 ✓ Compiled (2120 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🚀 checkMaintenanceStatus called
📋 Querying system settings...
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 440ms
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 440ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 16ms
 ✓ Compiled /api/developer/stats in 288ms (2122 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 565ms
 GET /api/developer/stats 200 in 587ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/stats 200 in 7ms
 ○ Compiling /developer/analytics ...
 ✓ Compiled /developer/analytics in 1544ms (5014 modules)
 GET /developer/analytics 200 in 260ms
🚀 checkMaintenanceStatus called
📋 Querying system settings...
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 63ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 69ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 22ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/stats 200 in 64ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 45ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/stats 200 in 19ms
 ✓ Compiled /api/developer/analytics in 368ms (5016 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:350:16)
  348 |   currentLevel = level;
  349 |   pinoEnabled = enabled;
> 350 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  351 |   systemLogger.startup();
  352 | });
  353 |
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/analytics?type=overview&range=30d 200 in 409ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/analytics?type=overview&range=30d 200 in 14ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/analytics?type=trends&range=30d 200 in 17ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/analytics?type=trends&range=30d 200 in 14ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/analytics?type=teams&range=30d 200 in 15ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/analytics?type=teams&range=30d 200 in 6ms
 GET /developer 200 in 137ms
🚀 checkMaintenanceStatus called
📋 Querying system settings...
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 25ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 32ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 23ms
 GET /api/developer/stats 200 in 27ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 12ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/stats 200 in 14ms
 ✓ Compiled in 451ms (2400 modules)
 GET /developer 200 in 30ms
 ✓ Compiled in 430ms (2400 modules)
 GET /developer 200 in 35ms
 ✓ Compiled in 651ms (4855 modules)
 GET /developer 200 in 159ms
 ✓ Compiled in 194ms (2400 modules)
 GET /developer 200 in 21ms
 ✓ Compiled in 194ms (2400 modules)
 GET /developer 200 in 20ms
 ✓ Compiled in 196ms (2400 modules)
 GET /developer 200 in 21ms
 ✓ Compiled in 216ms (2400 modules)
 GET /developer 200 in 16ms
 ✓ Compiled in 221ms (2400 modules)
 GET /developer 200 in 23ms
 ✓ Compiled in 234ms (2400 modules)
 GET /developer 200 in 12ms
 ✓ Compiled in 343ms (2400 modules)
 GET /developer 200 in 19ms
 ✓ Compiled in 214ms (2400 modules)
 GET /developer 200 in 16ms
 ✓ Compiled in 193ms (2400 modules)
 GET /developer 200 in 17ms
 ✓ Compiled in 189ms (2400 modules)
 GET /developer 200 in 19ms
 ✓ Compiled in 285ms (2400 modules)
 GET /developer 200 in 15ms
 ○ Compiling /tickets ...
 ✓ Compiled /tickets in 868ms (2493 modules)
 GET /tickets 200 in 1169ms
 GET /tickets 200 in 15ms
 ✓ Compiled /api/auth/user in 342ms (2642 modules)
 ✓ Compiled in 0ms (2646 modules)
 ✓ Compiled in 1ms (2646 modules)
 ✓ Compiled in 0ms (2646 modules)
🚀 checkMaintenanceStatus called
📋 Querying system settings...
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 1074ms
 ✓ Compiled /api/ticket-data/categories in 0ms (2646 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 1329ms
 GET /tickets 200 in 988ms
 ✓ Compiled in 0ms (2650 modules)
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 633ms
 GET /api/ticket-data/organization 200 in 890ms
 GET /api/ticket-data/categories 200 in 891ms
 GET /tickets 200 in 624ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/auth/user 200 in 14ms
 GET /api/ticket-data/organization 200 in 15ms
 GET /api/ticket-data/categories 200 in 16ms
 ✓ Compiled /api/tickets in 199ms (2652 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/tickets?status=pending&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 440ms
 GET /tickets 200 in 427ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/tickets?status=pending&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 24ms
 GET /tickets 200 in 25ms
 GET /api/ticket-data/categories 200 in 30ms
 ✓ Compiled /api/developer/teams/[id]/users in 219ms (2654 modules)
 ✓ Compiled in 1ms (2656 modules)
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
 GET /api/ticket-data/organization 200 in 725ms
 ✓ Compiled in 0ms (2656 modules)
 ✓ Compiled in 0ms (2656 modules)
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /api/developer/teams 200 in 1141ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 184
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
✅ User found in database: admin
🔧 Raw user.login_preferences from database: {"default_destination": "admin"}
🔍 Fetching permissions for user role: admin
✅ Database permissions found: 70
🔑 User permissions: [
  'admin.maintenance_override',
  'admin.manage_categories',
  'admin.manage_data',
  'admin.manage_organization',
  'admin.manage_roles'
] ...
✅ User with permissions created, permission count: 70
🔧 Final user object login_preferences: {"default_destination": "admin"}
 GET /tickets 200 in 1135ms
 GET /api/developer/teams/ADMIN/users 200 in 1380ms
 GET /tickets 200 in 13ms
/Users/borischu/orvale-management-system/node_modules/pino/lib/transport.js:160
      throw new Error(`unable to determine transport target for "${origin}"`)
^


Error: unable to determine transport target for "pino-pretty"
    at fixTarget (webpack-internal:///(rsc)/./node_modules/pino/lib/transport.js:160:13)
    at transport (webpack-internal:///(rsc)/./node_modules/pino/lib/transport.js:130:22)
    at normalizeArgs (webpack-internal:///(rsc)/./node_modules/pino/lib/tools.js:312:16)
    at pino (webpack-internal:///(rsc)/./node_modules/pino/pino.js:91:28)
    at eval (webpack-internal:///(rsc)/./lib/logger.ts:337:57)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

Node.js v22.17.0
 ○ Compiling / ...
 ✓ Compiled / in 650ms (2674 modules)
 GET / 200 in 970ms
🚀 checkMaintenanceStatus called
📋 Querying system settings...
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 35ms
 ✓ Compiled /api/auth/login in 282ms (2676 modules)
🔧 Initializing Orvale Management System database...
Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
 ⨯ unhandledRejection: Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
 ⨯ unhandledRejection:  Error: unable to determine transport target for "pino-pretty"
    at eval (lib/logger.ts:370:16)
  368 |   currentLevel = level;
  369 |   pinoEnabled = enabled;
> 370 |   logger = pino(createLoggerConfig(level, enabled));
      |                ^
  371 |   systemLogger.startup();
  372 | });
  373 |
✅ Ticket sequences table initialized
✅ Ticket numbering system initialized
🔄 Updating existing tickets with new numbering system...
✅ Database already initialized with 6 users
📊 Found 14 existing tickets to update
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
🔍 Fetching permissions for user role: it_user
 GET / 200 in 115ms
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
 POST /api/auth/login 200 in 412ms
✅ Updated ticket 1: IM-250818-431
✅ Updated ticket 2: IM-250818-432
✅ Updated ticket 3: IM-250818-433
✅ Updated ticket 4: IM-250818-434
✅ Updated ticket 5: IM-250818-435
✅ Updated ticket 6: IM-250819-087
✅ Updated ticket 7: R7-250819-329
✅ Updated ticket 8: HE-250819-067
✅ Updated ticket 9: R7-250819-330
✅ Updated ticket 10: R7-250819-331
✅ Updated ticket 11: R7-250819-332
✅ Updated ticket 12: da-250820-064
✅ Updated ticket 13: cw-250820-032
✅ Updated ticket 14: da-250820-065
🎉 All existing tickets updated successfully!
 GET /tickets 200 in 153ms
🚀 checkMaintenanceStatus called
📋 Querying system settings...
✅ System settings query complete: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
📋 Querying portal settings...
✅ Portal settings query complete: [
  {
    settings_json: '{"form_fields":{"name_required":true,"email_required":true,"phone_required":true,"employee_number_required":true,"office_required":true,"section_required":true,"location_required":true,"priority_enabled":true,"attachments_enabled":true,"max_attachments":5,"max_file_size":10,"allowed_file_types":["pdf","doc","docx","txt","jpg","png","gif"]},"display":{"portal_title":"DPSS IT Support Portal","portal_description":"Submit your IT support requests and track their progress","theme_color":"#2563eb","logo_url":"/support.ico","show_category_descriptions":true,"show_estimated_response_time":true,"enable_dark_mode":false,"items_per_page":10},"notifications":{"send_confirmation_email":true,"send_status_updates":true,"send_completion_notification":true,"email_template_confirmation":"Thank you for submitting your support request. Your ticket ID is {{ticket_id}}.","email_template_status_update":"Your support request {{ticket_id}} status has been updated to: {{status}}.","email_template_completion":"Your support request {{ticket_id}} has been completed.","sla_response_time_hours":24,"sla_resolution_time_hours":72,"escalation_enabled":true,"escalation_threshold_hours":48},"integrations":{"enable_api_access":false,"api_rate_limit":100,"webhook_url":"","enable_webhook":false,"external_knowledge_base_url":"","enable_chat_support":false,"enable_remote_assistance":false},"security":{"enable_captcha":false,"enable_file_scanning":true,"allowed_domains":[],"blocked_domains":[],"enable_ip_restrictions":false,"allowed_ip_ranges":[],"session_timeout_minutes":30,"max_login_attempts":5,"enable_audit_logging":true},"user_experience":{"enable_form_data_caching":true,"form_cache_duration_days":30,"enable_auto_save_drafts":true,"enable_form_progress_indicator":true,"enable_smart_form_completion":false},"advanced":{"enable_auto_assignment":true,"enable_smart_routing":false,"enable_duplicate_detection":true,"auto_close_resolved_after_days":7,"enable_satisfaction_survey":true,"enable_knowledge_base_suggestions":false,"enable_priority_escalation":true,"portal_maintenance_mode":false,"portal_maintenance_message":"The DPSS IT Support Portal is currently under maintenance. Please try again later or contact IT support directly.","portal_maintenance_contact":"","portal_maintenance_estimated_end":"","allow_queue_access_during_maintenance":true,"show_system_status_page":true}}'
  }
]
📋 Portal settings converted: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔧 Parsing system settings...
🔍 parseMaintenanceSettings system - settings object: {
  enableMaintenance: false,
  maintenanceMessage: 'System is under maintenance. Please try again later. Okay'
}
🔍 parseMaintenanceSettings system - enabledKey: enableMaintenance, value: false (type: boolean), enabled: false
✅ System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔧 Parsing portal settings...
🔍 parseMaintenanceSettings portal - settings object: {
  maintenance_mode: undefined,
  maintenance_message: undefined,
  portal_maintenance_theme: undefined,
  portal_estimated_return: undefined,
  portal_emergency_contact: undefined
}
🔍 parseMaintenanceSettings portal - enabledKey: maintenance_mode, value: undefined (type: undefined), enabled: false
✅ Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 System settings raw: [
  { setting_key: 'enableMaintenance', setting_value: 'false' },
  {
    setting_key: 'maintenanceMessage',
    setting_value: '"System is under maintenance. Please try again later. Okay"'
  }
]
🔍 System config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Portal settings raw: [
  { setting_key: 'maintenance_mode', setting_value: undefined },
  { setting_key: 'maintenance_message', setting_value: undefined },
  { setting_key: 'portal_maintenance_theme', setting_value: undefined },
  { setting_key: 'portal_estimated_return', setting_value: undefined },
  { setting_key: 'portal_emergency_contact', setting_value: undefined }
]
🔍 Portal config parsed: {
  enabled: false,
  config: {
    message: 'System is under maintenance. Please try again later.',
    theme: undefined,
    adminOverride: true,
    showRefreshButton: true,
    logChanges: true
  }
}
🔍 Final maintenance status: { isSystemMaintenance: false, isPortalMaintenance: false }
🔍 Maintenance API Debug: {
  isSystemMaintenance: false,
  isPortalMaintenance: false,
  effectiveMode: 'none',
  hasSystemConfig: true,
  hasPortalConfig: true
}
❌ No token provided in request
 GET /api/maintenance/status 200 in 27ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 32ms
 GET /api/ticket-data/organization 200 in 23ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 27ms
 GET /api/ticket-data/categories 200 in 31ms
 GET /api/ticket-data/organization 200 in 16ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/auth/user 200 in 21ms
 GET /api/ticket-data/categories 200 in 22ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=pending&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 12ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=pending&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 9ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
 GET /api/ticket-data/categories 200 in 47ms
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
 GET /api/ticket-data/organization 200 in 48ms
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/developer/teams 200 in 50ms
 GET /api/developer/teams/ITTS_Region7/users 200 in 43ms
/Users/borischu/orvale-management-system/node_modules/pino/lib/transport.js:160
      throw new Error(`unable to determine transport target for "${origin}"`)
^


Error: unable to determine transport target for "pino-pretty"
    at fixTarget (webpack-internal:///(rsc)/./node_modules/pino/lib/transport.js:160:13)
    at transport (webpack-internal:///(rsc)/./node_modules/pino/lib/transport.js:130:22)
    at normalizeArgs (webpack-internal:///(rsc)/./node_modules/pino/lib/tools.js:312:16)
    at pino (webpack-internal:///(rsc)/./node_modules/pino/pino.js:91:28)
    at eval (webpack-internal:///(rsc)/./lib/logger.ts:337:57)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

Node.js v22.17.0
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=pending&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 19ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=in_progress&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 17ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=completed&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 14ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=escalated&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 18ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=deleted&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 17ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=in_progress&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 17ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=pending&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 11ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=deleted&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 13ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=deleted&queue=team_tickets&priority=&sort=newest_first&limit=50 200 in 11ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=deleted&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 11ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=pending&queue=my_tickets&priority=&sort=newest_first&limit=50 200 in 16ms
🔍 Token found in Authorization header
✅ Token verified for user ID: 185
✅ User found in database: e603876
🔧 Raw user.login_preferences from database: {}
🔍 Fetching permissions for user role: it_user
✅ Database permissions found: 13
🔑 User permissions: [
  'queue.view_own_team',
  'system.view_basic_info',
  'team.view_members',
  'ticket.assign_within_team',
  'ticket.comment_own'
] ...
✅ User with permissions created, permission count: 13
🔧 Final user object login_preferences: {}
 GET /api/tickets?status=pending&queue=all_tickets&priority=&sort=newest_first&limit=50 200 in 13ms
[?25h
